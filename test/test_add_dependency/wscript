#! /usr/bin/env python
# encoding: utf-8

APPNAME = 'test_add_dependency'
VERSION = '1.0.0'

import mock
import os
import shutil

def resolve(ctx):

    # Replace git clone
    #ctx.git_clone = mock.Mock()
    #ctx.
    #return

    def fake_git_clone(ctx, source, destination, cwd):
        """ Mocking the resolve function which is the one called when
        fetching a dependency"""

        assert(source=='https://fake.com/libfoo.git')

        assert(0)

        shutil.copytree(src=path, dst=repo_path)

        return p




    ctx.add_dependency(
        name='waf',
        recurse=False,
        optional=False,
        sources=[{'resolver': 'git',
                  'url': 'github.com/waf-project/waf.git'}])


def options(opt):

    pass

def configure(conf):
    pass


def build(bld):
    pass
