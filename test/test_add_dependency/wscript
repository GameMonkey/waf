#! /usr/bin/env python
# encoding: utf-8

APPNAME = 'test_add_dependency'
VERSION = '1.0.0'

import mock
import os
import shutil

def resolve(ctx):



    def fake_git_clone(ctx, source, destination, cwd):
        """ Mocking the resolve function which is the one called when
        fetching a dependency"""

        assert(source=='https://fake.com/libfoo.git')

        assert(0)

        shutil.copytree(src=path, dst=repo_path)

        return p




    ctx.add_dependency(
        name='waf',
        recurse=False,
        optional=False,
        resolver='git',
        method='checkout',
        checkout='waf-1.9.5',
        sources=['github.com/waf-project/waf.git'])
        
    ctx.add_dependency(
        name='meta',
        recurse=False,
        optional=False,
        resolver='git',
        method='semver',
        major=1,
        sources=['github.com/steinwurf/meta.git'])


def options(opt):

    pass

def configure(conf):
    pass


def build(bld):
    print("PATH ", bld.dependency_path('waf'))
    print("PATH ", bld.dependency_path('meta'))
