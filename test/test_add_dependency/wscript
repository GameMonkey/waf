#! /usr/bin/env python
# encoding: utf-8

APPNAME = 'test_add_dependency'
VERSION = '1.0.0'

import mock
import os
import shutil

def resolve(ctx):

    # Replace git clone
    #ctx.git_clone = mock.Mock()
    #ctx.
    #return

    def fake_git_clone(ctx, source, destination, cwd):
        """ Mocking the resolve function which is the one called when
        fetching a dependency"""

        assert(source=='https://fake.com/libfoo.git')

        assert(0)

        shutil.copytree(src=path, dst=repo_path)

        return p

    ctx.git_clone = fake_git_clone

    ctx.add_dependency(
        name='libfoo',
        recurse=False,
        optional=False,
        sources=[{'type': 'git_checkout', 
                  'url': 'fake.com/libfoo.git',
                  'checkout': 'some-branch'}])


def options(opt):
    pass

def configure(conf):
    pass


def build(bld):
    pass
